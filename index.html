
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Report Control Center</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #1e1e2f;
      color: #f0f0f0;
      padding: 30px;
    }
    h1 {
      color: #66d9ef;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .admin-btn {
      background: #ffae00;
      color: #000;
      padding: 8px 14px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }
    .category {
      margin-top: 40px;
      border-left: 4px solid #66d9ef;
      padding-left: 10px;
    }
    .category h2 {
      margin-bottom: 10px;
      color: #00e0ff;
    }
    .report {
      background: #2a2a40;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      position: relative;
    }
    .copy-btn, .edit-btn, .delete-btn {
      background: #66d9ef;
      color: black;
      font-weight: bold;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      margin-left: 5px;
      cursor: pointer;
    }
    .delete-btn {
      background: #ff4d4d;
      color: white;
    }
    .edit-btn {
      background: #ffd000;
    }
    pre {
      white-space: pre-wrap;
      word-break: break-word;
    }
    .hidden {
      display: none;
    }
    #adminPanel {
      background: #121220;
      border: 1px solid #66d9ef;
      padding: 20px;
      border-radius: 8px;
      margin-top: 30px;
    }
    textarea {
      width: 100%;
      height: 120px;
      background: #1e1e2f;
      color: #fff;
      border: 1px solid #66d9ef;
      border-radius: 6px;
      padding: 10px;
      margin-top: 10px;
      margin-bottom: 10px;
    }
    select, input[type="text"] {
      background: #1e1e2f;
      color: white;
      border: 1px solid #66d9ef;
      padding: 5px;
      border-radius: 4px;
      margin-right: 10px;
    }
  </style>
</head>
<body>

<h1>
  üìã Report Center
  <button class="admin-btn" onclick="enableAdmin()">Modo Admin</button>
</h1>

<div id="categories"></div>

<div id="adminPanel" class="hidden">
  <h2>‚ûï Agregar nuevo reporte</h2>
  <form onsubmit="addReport(event)">
    <label>Categor√≠a:</label>
    <select id="newCategory"></select>
    <br><br>
    <label>T√≠tulo:</label>
    <input type="text" id="newTitle" required />
    <br><br>
    <label>Contenido:</label>
    <textarea id="newContent" required></textarea>
    <br>
    <button type="submit" class="copy-btn">Agregar</button>
  </form>
  <br>
  <button onclick="copyAllHTML()" class="edit-btn">üìã Copiar HTML actualizado</button>
</div>

<script>
const categories = {
  "Problem Solve": [],
  "HRV Sort": [],
  "Shoes Sort": [],
  "IDRT": [],
  "FUD": [],
  "IOL": [],
  "Recon": [],
  "Damageland": [],
  "IB Dock PS": []
};

let adminMode = false;

function render() {
  const container = document.getElementById("categories");
  container.innerHTML = "";
  for (const [category, reports] of Object.entries(categories)) {
    const section = document.createElement("div");
    section.className = "category";
    section.innerHTML = `<h2>${category}</h2>`;
    for (let i = 0; i < reports.length; i++) {
      const rep = reports[i];
      const id = category.replace(/\s+/g, '') + i;
      const reportDiv = document.createElement("div");
      reportDiv.className = "report";
      reportDiv.innerHTML = \`
        <button class="copy-btn" onclick="copyToClipboard('r\${id}')">üìã Copy</button>
        \${adminMode ? '<button class="edit-btn" onclick="editReport(\'\${category}\', '+i+')">‚úèÔ∏è Editar</button>' : ''}
        \${adminMode ? '<button class="delete-btn" onclick="deleteReport(\'\${category}\', '+i+')">üóëÔ∏è Eliminar</button>' : ''}
        <pre id="r\${id}">\${rep.title}\n\n\${rep.content}</pre>\`;
      section.appendChild(reportDiv);
    }
    container.appendChild(section);
  }
}

function enableAdmin() {
  const pass = prompt("Contrase√±a de administrador:");
  if (pass === "Qjuflore1211503") {
    adminMode = true;
    document.getElementById("adminPanel").classList.remove("hidden");
    render();
    populateCategorySelect();
    alert("‚úÖ Modo Admin activado.");
  } else {
    alert("‚ùå Contrase√±a incorrecta");
  }
}

function copyToClipboard(id) {
  const el = document.getElementById(id);
  navigator.clipboard.writeText(el.innerText).then(() => {
    alert("‚úÖ Copiado");
  });
}

function populateCategorySelect() {
  const select = document.getElementById("newCategory");
  select.innerHTML = "";
  for (const cat of Object.keys(categories)) {
    const opt = document.createElement("option");
    opt.value = cat;
    opt.textContent = cat;
    select.appendChild(opt);
  }
}

function addReport(e) {
  e.preventDefault();
  const cat = document.getElementById("newCategory").value;
  const title = document.getElementById("newTitle").value;
  const content = document.getElementById("newContent").value;
  categories[cat].push({ title, content });
  render();
  e.target.reset();
}

function deleteReport(category, index) {
  if (confirm("¬øEliminar este reporte?")) {
    categories[category].splice(index, 1);
    render();
  }
}

function editReport(category, index) {
  const current = categories[category][index];
  const newTitle = prompt("Editar t√≠tulo:", current.title);
  const newContent = prompt("Editar contenido:", current.content);
  if (newTitle !== null && newContent !== null) {
    categories[category][index] = { title: newTitle, content: newContent };
    render();
  }
}

function copyAllHTML() {
  let fullHTML = "<!DOCTYPE html>\n<html><head><meta charset='UTF-8'></head><body>";
  for (const [category, reports] of Object.entries(categories)) {
    fullHTML += `<h2>\${category}</h2>`;
    for (const rep of reports) {
      fullHTML += `<pre>\${rep.title}\n\n\${rep.content}</pre>`;
    }
  }
  fullHTML += "</body></html>";
  navigator.clipboard.writeText(fullHTML).then(() => {
    alert("üìã HTML copiado al portapapeles");
  });
}

render();
</script>

</body>
</html>
